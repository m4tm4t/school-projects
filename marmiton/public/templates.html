<script id="add_comment.html" type="text/ng-template"><div class="modal-header"><h3 class="modal-title">Ajouter un commentaire</h3></div><div class="modal-body"><form name="addCommentForm"><div class="form-group"><label>* Votre nom</label><input ng-required="true" ng-model="comment.username" class="form-control" /></div><div class="form-group"><label>* Commentaire</label><textarea ng-required="true" ng-model="comment.body" class="form-control"></textarea></div><div class="form-group"><label>* Note</label><rating ng-model="comment.note" max="5" state-on="'fa fa-star'" state-off="'fa fa-star-o'"></rating></div></form></div><div class="modal-footer"><button ng-click="!addCommentForm.$valid || add()" ng-disabled="!addCommentForm.$valid" class="btn btn-primary">{{ isEdition? 'Update' : 'Ajouter' }}</button><button ng-click="cancel()" class="btn btn-default">Annuler</button></div></script>
<script id="home" type="text/ng-template"><div class="jumbotron"><h2>Welcome Greedy!</h2><p><a href="/#/recipes/add" class="btn btn-primary">Create a recipe</a></p></div><div class="well"><form ng-submit="foo()"><div class="input-group"><input placeholder="Trouver une recette" ng-model="searchTerm" class="form-control" /><span ng-click="foo()" class="input-group-addon btn btn-primary"><div class="fa fa-search"></div></span></div></form></div><h3>Les dernières recettes</h3><div class="row"><div ng-repeat="recipe in recipes track by $index" class="col-md-4"><a ng-href="/#/recipes/{{recipe.id}}" class="recipe"><div class="panel panel-default"><div class="panel-heading"><h4>{{ recipe.name }}</h4></div><div class="panel-body"><img ng-src="/recipe-{{ recipe.id }}.jpg" width="100%" class="thumbnail" /></div></div></a></div></div></script>
<script id="addRecipe" type="text/ng-template"><h3>Creer une recette</h3><br /><ng-include src="'recipe_form'"></ng-include></script>
<script id="add_ingredient.html" type="text/ng-template"><div class="modal-header"><h3 class="modal-title">Add ingredient</h3></div><div class="modal-body"><form name="addIngredientForm"><div class="form-group"><input type="text" options="thOptions" datasets="thData" ng-model="searchResult" class="form-control typeahead sf-typeahead" placeholder="Type ingredient name" /></div><div ng-if="recipe_ingredient.ingredient" class="panel panel-default"><div class="panel-heading"><h4>{{ recipe_ingredient.ingredient.name }}</h4></div><div class="panel-body"><div class="form-group"><select class="form-control unit_type" ng-model="recipe_ingredient.unit_type" ng-options="unit.unit_type as unit.name for unit in units" ng-required="true"><option value="">Choose unit type</option></select></div><div class="form-group"><div style="width: 100%" class="input-group"><input style="width: 50% !important" placeholder="Value" ng-model="recipe_ingredient.unit_value" ng-required="true" class="form-control" /><select style="width: 50% !important" ng-model="recipe_ingredient.unit" ng-if="getUnits(recipe_ingredient.unit_type)" ng-options="v as k for (k, v) in getUnits(recipe_ingredient.unit_type)" ng-required="true" class="form-control"><option value="">Choose unit</option></select></div></div></div></div></form></div><div class="modal-footer"><button ng-click="!addIngredientForm.$valid || add()" ng-disabled="!recipe_ingredient.ingredient || !addIngredientForm.$valid" class="btn btn-primary">{{ isEdition? 'Update' : 'Add' }}</button><button ng-click="cancel()" class="btn btn-default">Cancel</button></div></script>
<script id="editRecipe" type="text/ng-template"><h2>Update recipe</h2><ng-include src="'recipe_form'"></ng-include></script>
<script id="recipe_form" type="text/ng-template"><div ng-if="similar != false" class="alert alert-danger"><p><b>Attention:</b>Cette recette semble déjà exister et ne sera pas validée : {{ similar.name }}</p></div><form name="recipe_form" class="recipe_form"><div class="row"><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><h4>Informations sur la recette</h4></div><div class="panel-body"><div class="form-group"><label>* Titre</label><input ng-model="recipe.name" ng-required="true" class="form-control" /></div><div class="form-group"><label>* Description</label><textarea ng-model="recipe.description" ng-required="true" class="form-control"></textarea></div><div class="form-group"><label>* Votre nom</label><input ng-model="recipe.username" ng-required="true" class="form-control" /></div><div class="form-group"><label>* Adresse e-mail</label><input ng-model="recipe.email" ng-required="true" class="form-control" /></div><div class="form-group"><label>* Image</label><input type="file" onchange="angular.element(this).scope().handleImage(this)" ng-required="true" /><img ng-src="{{ recipe.image }}" style="width: 100px" /></div></div></div></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><h4><a ng-click="addIngredient()" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i></a>&nbsp;&nbsp;&nbsp;Ingredients</h4></div><div class="panel-body"><div class="form-group"><div ng-if="!recipe.recipe_ingredients.length" class="alert alert-info"><i class="fa fa-info-circle"></i>&nbsp;&nbsp;&nbsp;Aucun ingrédient</div><ul ng-if="recipe.recipe_ingredients.length" class="nav nav-pills nav-stacked"><li ng-repeat="ri in recipe.recipe_ingredients track by $index"><a ng-click="editIngredient($index)"><div class="pull-left">{{ ri.ingredient.name }}</div><div class="pull-right"><div class="label label-default">{{ humanizeUnits(ri) }}</div></div><div class="clearfix"></div></a></li></ul></div></div></div><div class="panel panel-default"><div class="panel-heading"><h4>Type de recette</h4></div><div class="panel-body"><div class="form-group"><label>* Catégorie</label><select ng-model="recipe.category_id" ng-required="true" ng-options="category.id as category.name for category in categories" class="form-control"></select></div></div></div></div></div><div class="panel panel-default"><div class="panel-heading"><h4><a ng-click="addStep()" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i></a>&nbsp;&nbsp;&nbsp;Etapes</h4></div><div class="panel-body"><div ng-repeat="step in recipe.steps track by $index " class="panel panel-default"><div class="panel-heading"><div class="pull-left">Etape {{ $index+1 }}</div><div class="pull-right"></div><div class="clearfix"></div></div><div class="panel-body"><div class="form-group"><label>Titre</label><input ng-model="step.title" ng-required="true" class="form-control" /></div><div class="form-group"><label>Contenu</label><textarea ng-model="step.body" ng-required="true" class="form-control"></textarea></div></div></div><a ng-click="addStep()" class="btn btn-primary btn-xs"><i class="fa fa-plus"></i>&nbsp;&nbsp;&nbsp;Ajouter une autre étape</a></div></div><div class="form-group"><a ng-click="!recipe_form.$valid || save()" ng-disabled="!recipe_form.$valid" class="btn btn-default">Enregistrer</a></div></form></script>
<script id="searchRecipe" type="text/ng-template"><h3>Rechercher une recette</h3><div class="row"><div class="col-md-6"><div class="well"><form ng-submit="foo()"><div class="form-group"><label>Recherche avec mot(s) clé(s)</label><div class="input-group"><input placeholder="Trouver une recette" ng-model="searchTerm" class="form-control" /><span ng-click="foo()" class="input-group-addon btn btn-primary"><div class="fa fa-search"></div></span></div></div></form></div></div><div class="col-md-6"><div class="well"><div class="form-group"><label>Recherche avec ingrédients</label><input type="text" options="thOptions" datasets="thData" ng-model="searchResult" class="form-control typeahead sf-typeahead" placeholder="Type ingredient name" /></div><span style="margin-left: 5px" ng-repeat="ingredient in ingredients track by $index" class="btn btn-primary"><div class="pull-left">{{ ingredient.name }}</div><div class="pull-right">&nbsp;&nbsp;<a ng-click="removeIngredient($index)" class="btn btn-danger btn-xs"><div class="fa fa-times"></div></a></div></span></div></div></div><div ng-if="recipes.length" class="alert alert-success">{{ recipes.length }} résultat(s)</div><div ng-if="recipes.length" class="row"><div ng-repeat="recipe in recipes track by $index" class="col-md-4"><a ng-href="/#/recipes/{{recipe.id}}" class="recipe"><div class="panel panel-default"><div class="panel-heading"><h4>{{ recipe.name }}</h4></div><div class="panel-body"><img ng-src="/recipe-{{ recipe.id }}.jpg" width="100%" class="thumbnail" /></div></div></a></div></div><div ng-if="!recipes.length &amp;&amp; !ingredients.length" class="alert alert-info">Aucun résultat pour la recherche « <i>{{ $stateParams.term }}</i> »</div><div ng-if="!recipes.length &amp;&amp; ingredients.length" class="alert alert-info">Aucun résultat pour la recherche avec les ingrédients « <i>{{ ingToS() }}</i> »</div></script>
<script id="showRecipe" type="text/ng-template"><h2>{{ recipe.name }}</h2><div class="well">{{ recipe.description }}</div><div class="row"><div class="col-md-6"><img width="100%" ng-src="/recipe-{{recipe.id}}.jpg" class="thumbnail" /></div><div class="col-md-6"><div class="panel panel-default"><div class="panel-heading"><h4>Ingredients</h4></div><div class="panel-body"><ul class="nav nav-pills nav-stacked"><li ng-repeat="ri in recipe.recipe_ingredients"><a><div class="pull-left">{{ ri.ingredient.name }}</div><div class="pull-right"><div class="label label-default">{{ humanizeUnits(ri) }}</div></div><div class="clearfix"></div></a></li></ul></div></div></div></div><h3>Etapes</h3><hr /><div ng-repeat="step in recipe.steps track by $index" class="step"><h4>Etape {{$index+1}} - {{ step.title }}</h4><p>{{ step.body }}</p></div><h3>Commentaires</h3><hr /><a ng-click="addComment()" class="btn btn-primary"><div class="fa fa-plus"></div>&nbsp;&nbsp;Rédiger un commentaire</a><br /><br /><div ng-repeat="comment in recipe.comments" class="panel panel-default"><div class="panel-heading"><rating readonly="true" ng-model="comment.note" max="5" state-on="'fa fa-star'" state-off="'fa fa-star-o'"></rating>Par {{ comment.username }}</div><div class="panel-body">{{ comment.body }}</div></div></script>